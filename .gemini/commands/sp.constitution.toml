description = "Create or update the Book RAG project constitution, ensuring it aligns with the core principles of the project."

prompt = """
---
description: "Create or update the Book RAG project constitution, ensuring it aligns with the core principles of Docusaurus, AI/RAG, and the specified data stack."
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Outline

You are updating the project constitution for the **Book RAG** project at `.specify/memory/constitution.md`. Your primary goal is to ensure the constitution reflects the project's core architectural and technological principles.

Follow this execution flow:

1.  **Load the existing constitution** at `.specify/memory/constitution.md`.
2.  **Analyze user input** for requests to add, remove, or update principles.
3.  **Draft the updated constitution content**. Ensure the principles are declarative and testable. The core principles should always include:
    *   **Content-First with Docusaurus**: Emphasizing Docusaurus as the core of the project.
    - **AI-Powered Interactivity**: Defining the roles of Gemini, `openai-chatkit`, and Qdrant.
    - **Robust and Scalable Data Layer**: Specifying Neon DB and Qdrant.
    - **Modern Authentication**: Highlighting the need for a secure, token-based auth system.
    - **Modular and Testable Components**: Enforcing separation of concerns.
    - **Spec-Driven Development**: Upholding the SDD workflow.
4.  **Update Versioning**: Increment the version number according to the changes made (MAJOR, MINOR, PATCH).
5.  **Validate Consistency**: Ensure the updated principles do not contradict the project's goals or other documentation.
6.  **Write the updated constitution** back to `.specify/memory/constitution.md`.
7.  **Report Completion**: Summarize the changes and provide a suggested commit message.

## Governance

- The constitution is the source of truth for the Book RAG project's architecture.
- Any significant deviation must be proposed as an amendment to the constitution and documented with an ADR (`/sp.adr`).
- All sub-agents (`/sp.plan`, `/sp.tasks`, etc.) must operate in accordance with the principles laid out in this constitution.

---

As the main request completes, you MUST create and complete a PHR (Prompt History Record).
"""