"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[220],{487:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"physical-ai-book/chapter2/building-packages","title":"2.3 Building ROS 2 Packages","description":"Learning Objectives","source":"@site/docs/physical-ai-book/chapter2/building-packages.md","sourceDirName":"physical-ai-book/chapter2","slug":"/physical-ai-book/chapter2/building-packages","permalink":"/docs/physical-ai-book/chapter2/building-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/muhammad-anas35/RAGai/tree/main/docs/physical-ai-book/chapter2/building-packages.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"2.1 ROS 2 Architecture and Core Concepts","permalink":"/docs/physical-ai-book/chapter2/architecture"},"next":{"title":"2.2 Nodes and Communication Patterns","permalink":"/docs/physical-ai-book/chapter2/communication"}}');var a=r(4848),i=r(8453);const c={},l="2.3 Building ROS 2 Packages",o={},d=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"ROS 2 Package Structure",id:"ros-2-package-structure",level:2},{value:"Anatomy of a Package",id:"anatomy-of-a-package",level:3},{value:"Creating a ROS 2 Workspace",id:"creating-a-ros-2-workspace",level:2},{value:"Workspace Structure",id:"workspace-structure",level:3},{value:"Creating a Workspace",id:"creating-a-workspace",level:3},{value:"Creating a Python Package",id:"creating-a-python-package",level:2},{value:"Using ros2 pkg create",id:"using-ros2-pkg-create",level:3},{value:"Understanding package.xml",id:"understanding-packagexml",level:3},{value:"Understanding setup.py",id:"understanding-setuppy",level:3},{value:"Creating a C++ Package",id:"creating-a-c-package",level:2},{value:"Using ros2 pkg create",id:"using-ros2-pkg-create-1",level:3},{value:"Understanding CMakeLists.txt",id:"understanding-cmakeliststxt",level:3},{value:"Building with colcon",id:"building-with-colcon",level:2},{value:"Basic Build Commands",id:"basic-build-commands",level:3},{value:"Build Options",id:"build-options",level:3},{value:"Example: Development Workflow",id:"example-development-workflow",level:3},{value:"Package Dependencies",id:"package-dependencies",level:2},{value:"Types of Dependencies",id:"types-of-dependencies",level:3},{value:"Example: Complete Dependencies",id:"example-complete-dependencies",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Package Organization",id:"package-organization",level:3},{value:"Code Organization",id:"code-organization",level:3},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Example: Complete Package Creation",id:"example-complete-package-creation",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Reflection Questions",id:"reflection-questions",level:2},{value:"Further Reading",id:"further-reading",level:2}];function t(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"23-building-ros-2-packages",children:"2.3 Building ROS 2 Packages"})}),"\n",(0,a.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,a.jsx)(n.p,{children:"By the end of this section, you will be able to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Understand ROS 2 package structure and organization"}),"\n",(0,a.jsx)(n.li,{children:"Create Python and C++ ROS 2 packages"}),"\n",(0,a.jsx)(n.li,{children:"Use colcon to build and manage workspaces"}),"\n",(0,a.jsx)(n.li,{children:"Configure package dependencies and metadata"}),"\n",(0,a.jsx)(n.li,{children:"Organize code following ROS 2 best practices"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsxs)(n.p,{children:["In ROS 2, a ",(0,a.jsx)(n.strong,{children:"package"})," is the fundamental unit of code organization. It's a directory containing nodes, libraries, configuration files, and metadata that together provide specific functionality. Think of packages as modular building blocks\u2014each robot system is composed of multiple packages working together."]}),"\n",(0,a.jsx)(n.p,{children:"This section teaches you how to create, build, and manage ROS 2 packages professionally."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"ros-2-package-structure",children:"ROS 2 Package Structure"}),"\n",(0,a.jsx)(n.h3,{id:"anatomy-of-a-package",children:"Anatomy of a Package"}),"\n",(0,a.jsx)(n.p,{children:"A typical ROS 2 Python package looks like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_robot_package/\r\n\u251c\u2500\u2500 package.xml           # Package metadata and dependencies\r\n\u251c\u2500\u2500 setup.py              # Python package configuration\r\n\u251c\u2500\u2500 setup.cfg             # Python package setup config\r\n\u251c\u2500\u2500 resource/             # Package marker files\r\n\u2502   \u2514\u2500\u2500 my_robot_package\r\n\u251c\u2500\u2500 my_robot_package/     # Python source code\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 my_node.py\r\n\u2502   \u2514\u2500\u2500 utils.py\r\n\u2514\u2500\u2500 test/                 # Unit tests\r\n    \u251c\u2500\u2500 test_copyright.py\r\n    \u2514\u2500\u2500 test_flake8.py\n"})}),"\n",(0,a.jsx)(n.p,{children:"A C++ package looks like this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_cpp_package/\r\n\u251c\u2500\u2500 package.xml           # Package metadata\r\n\u251c\u2500\u2500 CMakeLists.txt        # Build configuration\r\n\u251c\u2500\u2500 include/              # Header files\r\n\u2502   \u2514\u2500\u2500 my_cpp_package/\r\n\u2502       \u2514\u2500\u2500 my_class.hpp\r\n\u251c\u2500\u2500 src/                  # Source files\r\n\u2502   \u251c\u2500\u2500 my_node.cpp\r\n\u2502   \u2514\u2500\u2500 my_class.cpp\r\n\u2514\u2500\u2500 launch/               # Launch files (optional)\r\n    \u2514\u2500\u2500 my_launch.py\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-ros-2-workspace",children:"Creating a ROS 2 Workspace"}),"\n",(0,a.jsx)(n.h3,{id:"workspace-structure",children:"Workspace Structure"}),"\n",(0,a.jsx)(n.p,{children:"A ROS 2 workspace organizes multiple packages:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"ros2_ws/\r\n\u251c\u2500\u2500 src/                  # Source space (your packages)\r\n\u2502   \u251c\u2500\u2500 package_1/\r\n\u2502   \u251c\u2500\u2500 package_2/\r\n\u2502   \u2514\u2500\u2500 package_3/\r\n\u251c\u2500\u2500 build/                # Build artifacts (auto-generated)\r\n\u251c\u2500\u2500 install/              # Installed files (auto-generated)\r\n\u2514\u2500\u2500 log/                  # Build logs (auto-generated)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"creating-a-workspace",children:"Creating a Workspace"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create workspace directory\r\nmkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws\r\n\r\n# Build the workspace (even if empty)\r\ncolcon build\r\n\r\n# Source the workspace\r\nsource install/setup.bash\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Important"}),": Always source your workspace before using packages in it!"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-python-package",children:"Creating a Python Package"}),"\n",(0,a.jsx)(n.h3,{id:"using-ros2-pkg-create",children:"Using ros2 pkg create"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\n\r\n# Create a Python package\r\nros2 pkg create --build-type ament_python \\\r\n  --node-name my_first_node \\\r\n  my_robot_package \\\r\n  --dependencies rclpy geometry_msgs sensor_msgs\r\n\r\n# This creates:\r\n# - Package structure\r\n# - A sample node (my_first_node.py)\r\n# - package.xml with dependencies\r\n# - setup.py configured\n"})}),"\n",(0,a.jsx)(n.h3,{id:"understanding-packagexml",children:"Understanding package.xml"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>my_robot_package</name>\r\n  <version>0.0.1</version>\r\n  <description>My robot control package</description>\r\n  <maintainer email="you@example.com">Your Name</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  \x3c!-- Build tool dependency --\x3e\r\n  <buildtool_depend>ament_python</buildtool_depend>\r\n\r\n  \x3c!-- Runtime dependencies --\x3e\r\n  <exec_depend>rclpy</exec_depend>\r\n  <exec_depend>geometry_msgs</exec_depend>\r\n  <exec_depend>sensor_msgs</exec_depend>\r\n\r\n  \x3c!-- Test dependencies --\x3e\r\n  <test_depend>ament_copyright</test_depend>\r\n  <test_depend>ament_flake8</test_depend>\r\n  <test_depend>ament_pep257</test_depend>\r\n  <test_depend>python3-pytest</test_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"understanding-setuppy",children:"Understanding setup.py"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\r\n\r\npackage_name = 'my_robot_package'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.1',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='Your Name',\r\n    maintainer_email='you@example.com',\r\n    description='My robot control package',\r\n    license='Apache-2.0',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'my_first_node = my_robot_package.my_first_node:main',\r\n            'velocity_controller = my_robot_package.velocity_controller:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Key Point"}),": The ",(0,a.jsx)(n.code,{children:"entry_points"})," section defines executable nodes!"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"creating-a-c-package",children:"Creating a C++ Package"}),"\n",(0,a.jsx)(n.h3,{id:"using-ros2-pkg-create-1",children:"Using ros2 pkg create"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\n\r\n# Create a C++ package\r\nros2 pkg create --build-type ament_cmake \\\r\n  --node-name my_cpp_node \\\r\n  my_cpp_package \\\r\n  --dependencies rclcpp geometry_msgs sensor_msgs\n"})}),"\n",(0,a.jsx)(n.h3,{id:"understanding-cmakeliststxt",children:"Understanding CMakeLists.txt"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cmake",children:'cmake_minimum_required(VERSION 3.8)\r\nproject(my_cpp_package)\r\n\r\n# Compiler settings\r\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")\r\n  add_compile_options(-Wall -Wextra -Wpedantic)\r\nendif()\r\n\r\n# Find dependencies\r\nfind_package(ament_cmake REQUIRED)\r\nfind_package(rclcpp REQUIRED)\r\nfind_package(geometry_msgs REQUIRED)\r\nfind_package(sensor_msgs REQUIRED)\r\n\r\n# Add executable\r\nadd_executable(my_cpp_node src/my_cpp_node.cpp)\r\nament_target_dependencies(my_cpp_node\r\n  rclcpp\r\n  geometry_msgs\r\n  sensor_msgs\r\n)\r\n\r\n# Install targets\r\ninstall(TARGETS\r\n  my_cpp_node\r\n  DESTINATION lib/${PROJECT_NAME}\r\n)\r\n\r\n# Install launch files (if any)\r\ninstall(DIRECTORY\r\n  launch\r\n  DESTINATION share/${PROJECT_NAME}/\r\n)\r\n\r\nament_package()\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"building-with-colcon",children:"Building with colcon"}),"\n",(0,a.jsx)(n.h3,{id:"basic-build-commands",children:"Basic Build Commands"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Build all packages in workspace\r\ncd ~/ros2_ws\r\ncolcon build\r\n\r\n# Build specific package\r\ncolcon build --packages-select my_robot_package\r\n\r\n# Build with symbolic links (Python only, for development)\r\ncolcon build --symlink-install\r\n\r\n# Build with verbose output\r\ncolcon build --event-handlers console_direct+\r\n\r\n# Clean build\r\nrm -rf build install log\r\ncolcon build\n"})}),"\n",(0,a.jsx)(n.h3,{id:"build-options",children:"Build Options"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Option"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"--packages-select PKG"})}),(0,a.jsx)(n.td,{children:"Build only specified package"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"--packages-up-to PKG"})}),(0,a.jsx)(n.td,{children:"Build package and its dependencies"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"--symlink-install"})}),(0,a.jsx)(n.td,{children:"Use symlinks (no rebuild for Python changes)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"--cmake-args"})}),(0,a.jsx)(n.td,{children:"Pass arguments to CMake"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"--parallel-workers N"})}),(0,a.jsx)(n.td,{children:"Use N parallel jobs"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"example-development-workflow",children:"Example: Development Workflow"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# 1. Create package\r\ncd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python my_pkg --dependencies rclpy\r\n\r\n# 2. Write code\r\ncd my_pkg/my_pkg\r\n# Edit your_node.py\r\n\r\n# 3. Add entry point in setup.py\r\n# 'your_node = my_pkg.your_node:main'\r\n\r\n# 4. Build with symlinks (for development)\r\ncd ~/ros2_ws\r\ncolcon build --packages-select my_pkg --symlink-install\r\n\r\n# 5. Source workspace\r\nsource install/setup.bash\r\n\r\n# 6. Run node\r\nros2 run my_pkg your_node\r\n\r\n# 7. Make changes to Python code\r\n# No rebuild needed with --symlink-install!\r\n# Just re-run: ros2 run my_pkg your_node\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"package-dependencies",children:"Package Dependencies"}),"\n",(0,a.jsx)(n.h3,{id:"types-of-dependencies",children:"Types of Dependencies"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"buildtool_depend"}),": Tools needed to build (e.g., ",(0,a.jsx)(n.code,{children:"ament_python"}),", ",(0,a.jsx)(n.code,{children:"ament_cmake"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"build_depend"}),": Packages needed at build time (C++ headers)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"exec_depend"}),": Packages needed at runtime"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"depend"}),": Both build and exec dependency (shorthand)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"test_depend"}),": Packages needed for testing"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"example-complete-dependencies",children:"Example: Complete Dependencies"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<package format="3">\r\n  <name>humanoid_controller</name>\r\n  \r\n  \x3c!-- Build tool --\x3e\r\n  <buildtool_depend>ament_cmake</buildtool_depend>\r\n  \r\n  \x3c!-- Core ROS 2 --\x3e\r\n  <depend>rclcpp</depend>\r\n  \r\n  \x3c!-- Messages --\x3e\r\n  <depend>geometry_msgs</depend>\r\n  <depend>sensor_msgs</depend>\r\n  <depend>std_msgs</depend>\r\n  \r\n  \x3c!-- Custom messages (if you have them) --\x3e\r\n  <build_depend>rosidl_default_generators</build_depend>\r\n  <exec_depend>rosidl_default_runtime</exec_depend>\r\n  \r\n  \x3c!-- Testing --\x3e\r\n  <test_depend>ament_lint_auto</test_depend>\r\n  <test_depend>ament_lint_common</test_depend>\r\n</package>\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"package-organization",children:"Package Organization"}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Do"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["One package per major functionality (e.g., ",(0,a.jsx)(n.code,{children:"navigation"}),", ",(0,a.jsx)(n.code,{children:"perception"}),", ",(0,a.jsx)(n.code,{children:"control"}),")"]}),"\n",(0,a.jsx)(n.li,{children:"Keep packages focused and modular"}),"\n",(0,a.jsxs)(n.li,{children:["Use meaningful package names (",(0,a.jsx)(n.code,{children:"my_robot_navigation"}),", not ",(0,a.jsx)(n.code,{children:"pkg1"}),")"]}),"\n",(0,a.jsx)(n.li,{children:"Include README.md in each package"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u274c ",(0,a.jsx)(n.strong,{children:"Don't"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Put everything in one giant package"}),"\n",(0,a.jsx)(n.li,{children:"Mix unrelated functionality"}),"\n",(0,a.jsxs)(n.li,{children:["Use generic names like ",(0,a.jsx)(n.code,{children:"utils"})," or ",(0,a.jsx)(n.code,{children:"common"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"code-organization",children:"Code Organization"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_robot_package/\r\n\u251c\u2500\u2500 my_robot_package/\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 nodes/              # Executable nodes\r\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u2502   \u251c\u2500\u2500 controller.py\r\n\u2502   \u2502   \u2514\u2500\u2500 planner.py\r\n\u2502   \u251c\u2500\u2500 utils/              # Utility functions\r\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u2502   \u251c\u2500\u2500 math_utils.py\r\n\u2502   \u2502   \u2514\u2500\u2500 transforms.py\r\n\u2502   \u2514\u2500\u2500 config/             # Configuration classes\r\n\u2502       \u251c\u2500\u2500 __init__.py\r\n\u2502       \u2514\u2500\u2500 robot_config.py\r\n\u251c\u2500\u2500 launch/                 # Launch files\r\n\u2502   \u2514\u2500\u2500 robot.launch.py\r\n\u251c\u2500\u2500 config/                 # YAML config files\r\n\u2502   \u2514\u2500\u2500 params.yaml\r\n\u2514\u2500\u2500 test/                   # Tests\r\n    \u2514\u2500\u2500 test_controller.py\n"})}),"\n",(0,a.jsx)(n.h3,{id:"naming-conventions",children:"Naming Conventions"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Packages"}),": ",(0,a.jsx)(n.code,{children:"snake_case"})," (e.g., ",(0,a.jsx)(n.code,{children:"my_robot_navigation"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Nodes"}),": ",(0,a.jsx)(n.code,{children:"snake_case"})," (e.g., ",(0,a.jsx)(n.code,{children:"velocity_controller"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Topics"}),": ",(0,a.jsx)(n.code,{children:"/snake_case"})," (e.g., ",(0,a.jsx)(n.code,{children:"/cmd_vel"}),", ",(0,a.jsx)(n.code,{children:"/robot/odom"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Services"}),": ",(0,a.jsx)(n.code,{children:"/snake_case"})," (e.g., ",(0,a.jsx)(n.code,{children:"/get_plan"}),", ",(0,a.jsx)(n.code,{children:"/reset_odom"}),")"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Python files"}),": ",(0,a.jsx)(n.code,{children:"snake_case.py"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"C++ files"}),": ",(0,a.jsx)(n.code,{children:"snake_case.cpp"})," / ",(0,a.jsx)(n.code,{children:".hpp"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"example-complete-package-creation",children:"Example: Complete Package Creation"}),"\n",(0,a.jsx)(n.p,{children:"Let's create a complete package for a simple robot controller:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# 1. Create workspace\r\nmkdir -p ~/humanoid_ws/src\r\ncd ~/humanoid_ws/src\r\n\r\n# 2. Create package\r\nros2 pkg create --build-type ament_python \\\r\n  humanoid_controller \\\r\n  --dependencies rclpy geometry_msgs sensor_msgs\r\n\r\n# 3. Create node file\r\ncd humanoid_controller/humanoid_controller\r\ncat > balance_controller.py << 'EOF'\r\n#!/usr/bin/env python3\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import Imu\r\nfrom geometry_msgs.msg import Twist\r\n\r\nclass BalanceController(Node):\r\n    def __init__(self):\r\n        super().__init__('balance_controller')\r\n        \r\n        # Subscribe to IMU\r\n        self.imu_sub = self.create_subscription(\r\n            Imu, '/imu/data', self.imu_callback, 10\r\n        )\r\n        \r\n        # Publish velocity commands\r\n        self.cmd_pub = self.create_publisher(Twist, '/cmd_vel', 10)\r\n        \r\n        self.get_logger().info('Balance Controller started')\r\n    \r\n    def imu_callback(self, msg):\r\n        # Simple balance control (placeholder)\r\n        cmd = Twist()\r\n        \r\n        # If tilting forward, move backward\r\n        if msg.linear_acceleration.x > 1.0:\r\n            cmd.linear.x = -0.1\r\n        \r\n        self.cmd_pub.publish(cmd)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = BalanceController()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\r\nEOF\r\n\r\n# 4. Update setup.py entry points\r\n# Add: 'balance_controller = humanoid_controller.balance_controller:main'\r\n\r\n# 5. Build\r\ncd ~/humanoid_ws\r\ncolcon build --packages-select humanoid_controller --symlink-install\r\n\r\n# 6. Source and run\r\nsource install/setup.bash\r\nros2 run humanoid_controller balance_controller\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Packages"})," are the fundamental unit of code organization in ROS 2"]}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"colcon"})," is the build tool (replaces catkin from ROS 1)"]}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Workspaces"})," contain multiple packages in the ",(0,a.jsx)(n.code,{children:"src/"})," directory"]}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"package.xml"})," defines metadata and dependencies"]}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"setup.py"})," (Python) or ",(0,a.jsx)(n.strong,{children:"CMakeLists.txt"})," (C++) configures the build"]}),"\n",(0,a.jsxs)(n.p,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"--symlink-install"})," enables rapid Python development (no rebuild needed)"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"reflection-questions",children:"Reflection Questions"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Why is it better to have multiple small packages instead of one large package?"}),"\n",(0,a.jsxs)(n.li,{children:["What's the difference between ",(0,a.jsx)(n.code,{children:"build_depend"})," and ",(0,a.jsx)(n.code,{children:"exec_depend"}),"?"]}),"\n",(0,a.jsxs)(n.li,{children:["When should you use ",(0,a.jsx)(n.code,{children:"--symlink-install"})," and when should you avoid it?"]}),"\n",(0,a.jsx)(n.li,{children:"How would you organize a package that includes both perception and control nodes?"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"ROS 2 Packages"}),": ",(0,a.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html",children:"docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"colcon Documentation"}),": ",(0,a.jsx)(n.a,{href:"https://colcon.readthedocs.io",children:"colcon.readthedocs.io"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"ament_cmake"}),": ",(0,a.jsx)(n.a,{href:"https://docs.ros.org/en/humble/How-To-Guides/Ament-CMake-Documentation.html",children:"docs.ros.org/en/humble/How-To-Guides/Ament-CMake-Documentation.html"})]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Previous Section"}),": ",(0,a.jsx)(n.a,{href:"/docs/physical-ai-book/chapter2/nodes-communication",children:"\u2190 2.2 Nodes and Communication"}),(0,a.jsx)(n.br,{}),"\n",(0,a.jsx)(n.strong,{children:"Next Section"}),": ",(0,a.jsx)(n.a,{href:"/docs/physical-ai-book/chapter2/launch-parameters",children:"2.4 Launch Files and Parameters \u2192"})]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(6540);const a={},i=s.createContext(a);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);